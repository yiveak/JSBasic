# RegExp

**正则表达式（可叫作“regexp”或者“reg”）包含 *模式* 和 *可选的修饰符* 。**

**在JavaScript中创建正则表达式**

> 2种方式：
>
> 1. **通过调用RegExp对象的构造函数创建**
>
>    > ```javascript
>    > let 变量名 = new RegExp(/表达式/);
>    > ```
>
> 2. **通过字面量的方式**
>
>    > ```javascript
>    > let regexp = /表达式/;
>    > ```
>
> **什么时候使用 `new RegExp`?**
>
> > 通常我们使用的都是简短语法 `/.../`。但是它不接受任何变量插入，所以我们必须在写代码的时候就知道确切的 regexp。
> >
> > 另一方面，`new RegExp` 允许从字符串中动态地构造模式。

**`test()`**

> 检测字符串是否匹配该表达式的规则，返回值是true or false，参数是被测试的字符串。
>
> ```javascript
> regexObj.test(str);
> ```



## 修饰符

正则表达式的修饰符可能会影响搜索结果。

在 JavaScript 中，有 5 个修饰符：

- `i`

  使用此修饰符后，搜索时不区分大小写: `A` 和 `a` 没有区别（具体看下面的例子）。

- `g`

  使用此修饰符后，搜索时会查找所有的匹配项，而不只是第一个（在下一章会讲到）。

- `m`

  多行模式（详见章节 文章 "regexp-multiline" 未找到）。

- `u`

  开启完整的 unicode 支持。该修饰符能够修正对于代理对的处理。

- `y`

  粘滞模式



| 常用的元字符 限定符 |                                                     |
| ------------------- | --------------------------------------------------- |
| .                   | 匹配除换行符以外的任意**字符**                      |
| \w                  | 匹配**字母** 、数字、下划线、汉字                   |
| \s ---- space       | 匹配**任意的空白符** ，比如空格、水平制表符、换行符 |
| \d                  | 匹配**数字**                                        |
| \b ---- boder       | **单词**的**边界处**，只匹配**一个位置**            |
| ^                   | 匹配**字符串**的**开始**                            |
| $                   | 匹配**字符串**的**结束**                            |

转义字符：`\` 。`()` 表示优先级。或者：`|`。

**量词符**

| 常用的限定符 ---- 指定数量 |              |      |                                                    |
| -------------------------- | ------------ | ---- | -------------------------------------------------- |
| *                          | 重复>=0次    | n*   | 匹配任何包含零个或多个 *n* 的字符串。              |
| +                          | 重复>=1次    | n+   | 匹配任何包含至少一个 *n* 的字符串。                |
| ？                         | 重复0或者1次 | n?   | 重复n或n+1次 匹配任何包含零个或一个 *n* 的字符串。 |
| {n}                        | 重复n次      |      |                                                    |
| {n, }                      | 重复>=n次    |      |                                                    |
| {n, m}                     | 重复n到m次   |      |                                                    |





**字符类**

> **字符类（Character classes）** 是一个特殊的符号，匹配特定集中的任何符号。
>
> **`[]`** ：表示一系列字符可供选择的，**只要匹配到其中一个** 就可以。所有可供选择的字符都放在方括号内
>
> ```javascript
> let regexp = /[abc]/;
> console.log(regexp.test('alex')); // true
> console.log(regexp.test('babe')); // true
> console.log(regexp.test('color')); // true
> console.log(regexp.test('john')); // false
> 
> let regex = /^[abc]$/; // 三选一，只有是a，或b，或c，才返回true。
> console.log(regx.test('a')); // true
> console.log(regx.test('b')); // true
> console.log(regx.test('c')); // true
> 其他情况都是false
> console.log(regx.test('abc')); // false
> ```
>
> **`[-]`** ：方括号内部 范围符 `-` **多选一**
>
> ```javascript
> let regexp = /^[a-z]$/; // 26小写英文字母的任一个返回true
> console.log(regexp.test('A')); // false
> 
> let regexp = /^[a-zA-Z]$/; // 大小写的26英文字母任一个返回true
> 
> let regexp = /^[a-z0-9_-]$/; // 限定字符串由字母、数字、下划线、-任一个组成
> let regexp = /^[^a-z0-9_-]$/; // a之前的^表示取反，[]外的^表示边界符，[]内的^表示取反。
> ```



**预定义类**

> 

| 预定义类                     | 说明 多选一                                             |
| ---------------------------- | ------------------------------------------------------- |
| `\d`**（“d” 来自 “digit”）** | 匹配0-9之间的任一数字 `[0-9]`                           |
| \D 非数字                    | 匹配0-9以外的任一字符，`[^0-9]`                         |
| `\w`**（“w” 来自 “word”）**  | 匹配任一的字母、数字、下划线，`[A-Za-z0-9]`             |
| \W 非单字字符                | `[^A-Za-z0-9]`                                          |
| `\s`**（“s” 来自 “space”）** | 匹配空格(包括制表符、换行符、空格符...)，`[\t\r\n\v\f]` |
| \S 非空格符号                | 匹配非空格的任一字符，`[^\t\r\n\v\f]`                   |

**反向类** ：对于每个字符类，都有一个“反向类”，用相同的字母表示，但要以大写书写形式。

> “反向”表示它与所有其他字符匹配，例如：
>
> - `\D`
>
>   非数字：除 `\d` 以外的任何字符，例如字母。
>
> - `\S`
>
>   非空格符号：除 `\s` 以外的任何字符，例如字母。
>
> - `\W`
>
>   非单字字符：除 `\w` 以外的任何字符，例如非拉丁字母或空格。

```javascript
let regexp = /^\d{3}-\d{8}|\d{4}-\d{7}$/; // 匹配座机号
```

